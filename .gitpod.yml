# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/introduction/learn-gitpod/gitpod-yaml)
# and commit this file to your remote git repository to share the goodness with others.

# Learn more from ready-to-use templates: https://www.gitpod.io/docs/introduction/getting-started/quickstart

tasks:
  - name: mongodb docker setup
    command: |
      docker network create mongodb
      docker pull mongo
      docker pull mongo-express
      docker run -d -p27017:27017 --name mongodatabase -e MONGO_INITDB_ROOT_USERNAME=admin -e MONGO_INITDB_ROOT_PASSWORD=password --network mongodb mongo
      docker run -d -p8081:8081 --name mongoserver -e ME_CONFIG_MONGODB_ADMINUSERNAME=admin -e ME_CONFIG_MONGODB_ADMINPASSWORD=password -e ME_CONFIG_MONGODB_SERVER=mongodatabase --network mongodb mongo-express

  - name: java project build with maven
    before: code --install-extension redhat.java
    init: mvn install -DskipTests=false
    command: |
      docker start mongoserver
      mvn compile
      mvn exec:java -Dexec.mainClass="org.example.Main"
